<div class="content" fxLayout="row" fxLayout.xs="column" fxFlexFill>
  <div fxFlex="25" fxFlex.xs="100">
    <div *ngIf="item && myForm" formToInject>
      <form *ngIf="item" (ngSubmit)="onSubmit()" [formGroup]="myForm" #formulario>
        <div class="mb-1">
          <!--<input id="tenantId" type="text" class="form-control" [(ngModel)]="item.tenantId" >-->
          <md-select ngControl="norma" [(ngModel)]="item.norma" style="width: 80%" [placeholder]="formMetaData.properties.norma['x-ncg'].label"
            [ngModelOptions]="{standalone: true}" (change)="cambiar(item.norma)">
            <md-option *ngFor="let opt of normas | async" [value]="opt.$key">{{opt.$key}}</md-option>
          </md-select>
        </div>
        <br>
        <div class="mb-1">
          <!--<input id="tenantId" type="text" class="form-control" [(ngModel)]="item.tenantId" >-->
          <md-select ngControl="especialidad" [(ngModel)]="item.especialidad" style="width: 80%" [placeholder]="formMetaData.properties.especialidad['x-ncg'].label"
            [ngModelOptions]="{standalone: true}" (change)="buscar(item.especialidad)">
            <md-option *ngFor="let opt of items1 | async" [value]="opt.nombre">{{opt.nombre}}</md-option>
          </md-select>
        </div>
        <br>
        <!--valEmailAddressPattern - string-->
        <div class="mb-1">
          <md-input-container style="width: 80%">
            <input mdInput id="curacion" value #curacionInput [placeholder]="formMetaData.properties.curacion['x-ncg'].label" [formControl]="myForm.controls['curacion']"
              [(ngModel)]="item.curacion" type="text" readonly/> </md-input-container>
          <small id="curacionErrorMsgs" *ngFor="let error of formMetaData.properties.curacion['x-ncg'].errors" class="md-text-warn">{{error.message}}</small>
        </div>
        <!--valEmailAddressPattern - string-->
        <div class="mb-1">
          <md-input-container style="width: 50%">
            <input mdInput id="pieza" #piezaInput [placeholder]="formMetaData.properties.pieza['x-ncg'].label" [formControl]="myForm.controls['pieza']"
              [(ngModel)]="item.pieza" type="text" readonly/> </md-input-container>
          <small id="piezaErrorMsgs" *ngFor="let error of formMetaData.properties.pieza['x-ncg'].errors" class="md-text-warn">{{error.message}}</small>
        </div>
        <div class="mb-1" [hidden]="true">
          <md-input-container style="width: 80%">
            <input mdInput id="imgcuracion" value #imgcuracionInput [placeholder]="formMetaData.properties.imgcuracion['x-ncg'].label"
              [formControl]="myForm.controls['imgcuracion']" [(ngModel)]="item.imgcuracion" type="text" readonly/> </md-input-container>
          <small id="imgcuracionErrorMsgs" *ngFor="let error of formMetaData.properties.imgcuracion['x-ncg'].errors" class="md-text-warn">{{error.message}}</small>
        </div>
        <div class="mb-1" [hidden]="true">
          <md-input-container style="width: 80%">
            <input mdInput id="estado" value #estadoInput [placeholder]="formMetaData.properties.estado['x-ncg'].label" [formControl]="myForm.controls['estado']"
              [(ngModel)]="item.estado" type="text" readonly/> </md-input-container>
          <small id="estadoErrorMsgs" *ngFor="let error of formMetaData.properties.estado['x-ncg'].errors" class="md-text-warn">{{error.message}}</small>
        </div>

        <br>
        <div class="mb-1">
          <!--<input id="tenantId" type="text" class="form-control" [(ngModel)]="item.tenantId" >-->
          <md-select ngControl="paciente" [(ngModel)]="item.paciente" [placeholder]="formMetaData.properties.paciente['x-ncg'].label"
            [ngModelOptions]="{standalone: true}" style="width: 80%">
            <md-option *ngFor="let opt of pacientes | async" [value]="opt.$key">{{opt.nombre}} &nbsp; {{opt.paterno}} &nbsp; {{opt.materno}}</md-option>
          </md-select>
          <md-input-container>
            <input mdInput type='text' placeholder='Introduzca CI paciente' (keyup)='updateFilter($event)' /> </md-input-container>
        </div>


        <div *ngIf="!myForm.valid" class="mb-1 ui error message">Formulario es invalido</div>
        <div class="content" fxLayout="row" fxLayout.xs="column" fxFlexFill>
          <div fxFlex="50" fxFlex.xs="100">
            <button md-raised-button color="primary" id="backButton" type="button" class="btn btn-secondary borde" (click)="goBack()"
              [attr.aria-label]="back">Atras</button>
            <button md-raised-button color="primary" id="cancelButton" type="button" class="btn btn-secondary borde" (click)="onCancel()"
              [attr.aria-label]="cancel">Cancelar</button>
          </div>
          <div fxFlex="50" fxFlex.xs="100">
            <button md-raised-button color="primary" id="resetButton" type="button" [disabled]="myForm.pristine" class="btn btn-secondary borde"
              (click)="onReset()" [attr.aria-label]="reset">Reiniciar</button>
            <button md-raised-button color="primary" id="submitButton" type="submit" [disabled]="myForm.invalid && isSubmitAttempted"
              class="btn btn-primary borde" [attr.aria-label]="submit">Guardar</button>
          </div>
        </div>
      </form>

    </div>
  </div>
  <div fxFlex="75" fxFlex.xs="100">
    <div [hidden]="tab">
      <ngx-datatable class="material" [headerHeight]="50" [limit]="5" [scrollbarH]="true" [columnMode]="'force'" [footerHeight]="50"
        [rowHeight]="'auto'" [rows]="norma1 | async">

        <ngx-datatable-column name="Especialidad">
          <ng-template let-value="row['tipo']" ngx-datatable-cell-template>
            {{value}}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Tratamiento">
          <ng-template let-value="row['nombre']" ngx-datatable-cell-template>
            {{value}}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Norma">
          <ng-template let-value="row['img']" ngx-datatable-cell-template>
            <img src="../../../assets/images/norma1/dentadura-sup-{{value}}.png" class="md-card-image" alt="image caption" />
          </ng-template>
        </ngx-datatable-column>


        <ngx-datatable-column name="Marcar">
          <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
            <button md-icon-button [mdMenuTriggerFor]="menu1">
              <img src="../assets/icons/baseline-done_outline-24px.svg">
            </button>

            <md-menu #menu1="mdMenu" x-position="before">
              <button md-menu-item (click)="mostrar1(row.nombre,row.img,'Malo')">
                <img src="../assets/icons/rojo.svg">Malo</button>
              <button md-menu-item (click)="mostrar1(row.nombre,row.img,'Bueno')">
                <img src="../assets/icons/azul.svg">Bueno</button>
            </md-menu>

          </ng-template>
        </ngx-datatable-column>
      </ngx-datatable>
    </div>
    <div [hidden]="tab1">
      <ngx-datatable class="material" [headerHeight]="50" [limit]="5" [scrollbarH]="true" [columnMode]="'force'" [footerHeight]="50"
        [rowHeight]="'auto'" [rows]="norma2 | async">

        <ngx-datatable-column name="Especialidad">
          <ng-template let-value="row['tipo']" ngx-datatable-cell-template>
            {{value}}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Tratamiento">
          <ng-template let-value="row['nombre']" ngx-datatable-cell-template>
            {{value}}
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Norma">
          <ng-template let-value="row['img']" ngx-datatable-cell-template>
            <img src="../../../assets/images/norma2/dentadura-sup-{{value}}.png" class="md-card-image" alt="image caption" />
          </ng-template>
        </ngx-datatable-column>

        <ngx-datatable-column name="Marcar">
          <ng-template let-row="row" let-value="value" ngx-datatable-cell-template>
            <button md-icon-button [mdMenuTriggerFor]="menu">
              <img src="../assets/icons/baseline-done_outline-24px.svg">
            </button>

            <md-menu #menu="mdMenu" x-position="before">
              <button md-menu-item (click)="mostrar1(row.nombre,row.img,'Malo')">
                <img src="../assets/icons/rojo.svg">Malo</button>
              <button md-menu-item (click)="mostrar1(row.nombre,row.img,'Bueno')">
                <img src="../assets/icons/azul.svg">Bueno</button>
              <button md-menu-item (click)="mostrar1(row.nombre,row.img,'Temporal')">
                <img src="../assets/icons/verde.svg">Temporal</button>
              <button md-menu-item (click)="mostrar1(row.nombre,row.img,'Malo')">
                <img src="../assets/icons/naranja.svg">Malo</button>
            </md-menu>

          </ng-template>
        </ngx-datatable-column>
      </ngx-datatable>
    </div>
    <div layout="row" layout-margin class="main-div" style="margin-top: 10px;">
        <md-card style="margin-bottom: -10px;">
          <md-card-content *ngFor="let item of superior | async" class="linea">
            
            <h5 style="border: 1px solid black;">{{item?.id}}</h5>
            <img src="../../../assets/images/dentadura-sup-{{item?.diente}}.png" class="md-card-image" height="87" width="31" alt="image caption"  (click)="mostrar(item?.id,'SUPERIOR')"
            />
          </md-card-content>
        </md-card>
      </div>
  
      <div layout="row" layout-margin class="main-div">
        <md-card style="margin-top: -10px;">
          <md-card-content *ngFor="let item of inferior | async" class="linea">
            <img src="../../../assets/images/dentadura-inf-{{item?.diente}}.png" class="md-card-image" height="87" width="31" alt="image caption" (click)="mostrar(item?.id,'INFERIOR')"
            />
            <h5 style="border: 1px solid black;">{{item?.id}}</h5>
          </md-card-content>
        </md-card>
      </div>
  </div>
</div>

